# 
# Copyright (c) 2011-2012, John D. Blair <jdb@moship.net>
# All rights reserved.
#
# 10x_Inverter.mdl modified to Charge_Controller.mdl by
# Darren Emmons OutBack Power Technologies 
# 
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions are met:
# 
# * Redistributions of source code must retain the above copyright
#   notice, this list of conditions and the following disclaimer.
# 
# * Redistributions in binary form must reproduce the above copyright
#   notice, this list of conditions and the following disclaimer in the
#   documentation and/or other materials provided with the distribution.
# 
# * Neither the name of John D. Blair nor his lackeys may be used
#   to endorse or promote products derived from this software
#   without specific prior written permission.
# 
# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
# "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
# LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
# FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL
# JOHN D. BLAIR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
# SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
# LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
# USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
# ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
# OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
# OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
# SUCH DAMAGE.


#
# charge controller model
#
model suns {
  name "Charge Contoller"
  did 64111 "Basic Charge Controller"
  datapoints {
    Port            {  uint16 label="Port Number" req }
    V_SF            {  sunssf req }
    A_SF            {  sunssf req }
    P_SF            {  sunssf req }
    AH_SF           {  sunssf req }
    KWH_SF          {  sunssf req }
    BattV           {  uint16.V_SF u=V label="Battery Voltage" req }
    ArrayV          {  uint16.V_SF u=V label="Array Voltage" req }
    OutputA         {  uint16.A_SF u=A label="Output Current" req }
    InputA          {  uint16.P_SF u=A label="Array Current" req }
    ChargerSt       {  enum16.ChargerSt_Enum label="Operating State" req }
    OutputW         {  uint16.P_SF u=W label="Output Wattage" req }
    TodayMinBatV    {  uint16.V_SF u=V label="Todays Minimum Battery Voltage" req }
    TodayMaxBatV    {  uint16.V_SF u=V label="Todays Maximum Battery Voltage" req }
    VOCV            {  uint16.V_SF u=V label="VOC" req }
    TodayMaxVOC     {  uint16.V_SF u=V label="Todays Maximum VOC" req }
    TodaykWhOutput  {  uint16.KWH_SF u=kWh label="Todays kWh" req }
    TodayAHOutput   {  uint16.AH_SF u=AH label="Todays AH" req }
    LifeTimeKWHOut  {  uint16.P_SF u=kWh label="Lifetime kWh" req }
    LifeTimeAHOut   {  uint16.KWH_SF u=kAH label="Lifetime kAH" req }
    LifeTimeMaxOut  {  uint16.P_SF u=W label="Lifetime Maximum Output Wattage" req }
    LifeTimeMaxBatt {  uint16.V_SF u=V label="Lifetime Maximum Battery Voltage" req }
    LifeTimeMaxVOC  {  uint16.V_SF u=V label="Lifetime Maximum VOC Voltage" req }
  }


  define ChargerSt_Enum {
    Off              { 0 "Off" }
    Float            { 1 "Float Charging" }
    Bulk             { 2 "Bulk Charging" }
    Absorb           { 3 "Absorb Charging" }
    EQ               { 4 "Equilize Charging" }
  }
}

data charge_contoller_mod64111_test {
    64111
    23
    10        # CC_Port_Number
    -1        # CC_Voltage_SF
    -1        # CC_Current_SF
    0         # CC_Power_SF
    0         # CC_AH_SF
    -1        # CC_KWH_SF
    100       # CC_BATTERY_VOLTAGE
    200       # CC_ARRAY_VOLTAGE
    100       # CC_BATTERY_CURRENT
    100       # CC_ARRAY_CURRENT
    4         # CC_CHARGER_STATE
    10000     # CC_WATTS
    100       # CC_TODAYS_MIN_BATTERY_VOLTS
    100       # CC_TODAYS_MAX_BATTERY_VOLTS
    600       # CC_VOC
    600       # CC_TODAYS_MAX_VOC
    1000      # CC_TODAYS_KWH
    1000      # CC_TODAYS_AH
    65535     # CC_LIFETIME_KWH
    65535     # CC_LIFETIME_KAH
    10000     # CC_LIFETIME_MAX_WATTS
    100       # CC_LIFETIME_MAX_BATTERY_VOLTS
    600       # CC_LIFETIME_MAX_VOC
}



  


